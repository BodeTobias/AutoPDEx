name: Tests

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the repository
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10' 

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pytest
          pip install autopdex
          pip install jax
          pip install jaxlib
          pip install flax
          pip install jaxopt
          pip install meshio
          pip install numpy
          pip install plotly
          pip install pygmsh
          pip install pyvista
          pip install scipy
          pip install scikit-optimize
          pip install sparsejac

      - name: Run tests
        run: |
          pytest
